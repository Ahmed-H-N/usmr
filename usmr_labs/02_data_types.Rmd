```{r include=FALSE}
library(tidyverse)
```

# Types of data {#chap-data-types}

:::lo
## Learning Objectives {-}

+ LO1: Learn how to access variables in a dataframe in R  
+ LO2: Understand the distinction between types of variables  
+ LO3: Learn how to code data as different types (classes) in R  

:::

So we've got R and Rstudio installed, and we know how to read in data from an external source, and do some basic arithmetic operations.  

We're going to now take a look at how to pull out specific pieces of data, before we move on to talking about different types of data. 

## Accessing subsections of data  

Suppose we read some data in to R:
```{r message=FALSE}
some_data<-dplyr::starwars %>% select(-mass, -skin_color, -films, -vehicles,-starships, -gender,-birth_year)
some_data[87,]<-c("Homer Simpson",180,NA,NA,"Springfield","unknown")
some_data[2,"species"]<-"Human"
some_data[7,"height"]<-9420
```

:::yellow
__Reading data from the internet__ 

Note that when you have a url for some data, such as [link](url), you can read it in directly by giving functions like `read_csv()` the url inside quotation marks. 
:::

We can print out the top of the data by using the name we just gave it:  
```{r}
some_data
```
The data contains information on various characteristics of characters from Star Wars. 

:::green
__Tip:__ Try clicking on the data in your __environment__ (the top right window of Rstudio). It will open the data in a tab in the editor window - this is another way of looking at the data, more like you would in spreadsheet software like Microsoft Excel. 
:::

We can take a look at how big the data is (the dimensions), using `dim()`
```{r}
dim(some_data)
```
There's a reasonable amount of data in there - 87 rows and 6 variables (columns). What if we want to extract certain bits of it?  

This is where we learn about two important bits of R code used to access parts of data - the dollar sign `$`, and the square brackets `[]`.

#### The dollar sign $ {-}

The dollar sign allows us to select a specific variable.  
For instance, we can pull out the variable named "eye_color" in the data, by using `$eye_color` after the name that we gave our dataset: 
```{r}
some_data$eye_color
```

#### The square brackets [] {-}

Square brackets are used to do what is known as __indexing__ (finding specific entries in your data).  

We can retrieve bits of data by identifying the $i^{th}$ entry(s) inside the square brackets, for instance: 

```{r}
somevalues <- c(10,20,30,40,50,60,70,80,90,100)

# pull out the 3rd entry
somevalues[3]
```

In the above example, we have a __vector__ (a single sequence of values), and so we can retrieve entries with the syntax:  
    _vector[entry]_  

In a __dataframe__ we have an extra dimension - we have _rows_ __and__ _columns_. 
Using square brackets with a dataframe needs us to specify both: 
    _dataframe[rows, columns]_

For instance:
```{r}
# first row, fourth column:
some_data[1,4]

# tenth row, first column:
some_data[10,1]
```

If we leave either rows or columns blank, then we will get out _all_ of them: 
```{r}
# tenth row, all columns:
some_data[10, ]

# all rows, 2nd column:
some_data[ , 2]
```

There are is another way to identify column - we can use the name in quotation marks:
```{r}
# first row, "species" column
some_data[1, "species"]
```

Finally, we can also ask for multiple rows, or multiple columns, or both!
```{r}
# the 1st AND the 6th row, 
# and the 1st AND 3rd columns:
some_data[c(1,6), c(1,3)]
```

And we can specify a sequence using the colon, `from:to`:  
```{r}
# FROM the 1st TO the 6th row, all columns:
some_data[1:6, ]
```

`r optbegin(label="Extra", slabel=FALSE)`
We can use the two accessors in combination: 

```{r}
# extract the variable called "name" and show the 20th entry 
some_data$name[20]
```

__Note:__ When we do this, we don't have the comma inside the square brackets.  
When we use the `$` to pull out a variable, such as `some_data$name`, we no longer have a dataframe - `some_data$name` doesn't have rows and columns, it just has a series of values - _it's a vector!_.   
So when you are using `[]` with a __vector__ (1 dimension) rather than a __dataframe__ (2 dimensions), you don't specify `[rows, columns]`, but simply `[entry]`. 
`r optend()`

:::yellow
#### Accessors {-}

__The dollar sign $__ 

Used to extract a variable from a dataframe:   

+ `dataframe$variable`

__The square brackets []__

Used to extract parts of an R object by identifying rows and/or columns, or more generally, "entries". Left blank will return all. 

+ `dataframe[rows, columns]`  
+ `vector[entries]`  

:::

---  

## Editing subsections of data  

Now that we've seen how to _access_ sections of data, we can learn how to edit them!  

:::yellow
__Data Cleaning__

One of the most common reasons you will need to edit entries in your data is in __data cleaning__. This is the process of identifying incorrect/incomplete/irrelevant data, and replacing/modifying/deleting them.  
:::



### Modifying specific entries {-}   

single entries
[]<-

### Changing a whole column {-}
change heights from centimeters to meters 
$ < 

### Removing rows/columns {-}
editing the whole data - e.g., removing a row


:::frame
think of it as "overwriting"
:::


## Types of data 
          
table - descriptions from lectures

|  __Type__|  __Description__|  __Example__|
|--:|--:|--:|
|  __Categorical__|  Variables with a discrete number of response options<br>Binary data is a special case with only 2 possible values|  Species: _Human_, _Droid_, _Wookie_, _Hutt_, ...<br>Is_Human: _Yes_, _No_.|
|  __Continuous__|  Variables which can take any real number value within the specified range of measurement|  Height: _172_, _165.2_, _183_, ... |
|  __Count__|  Variables which can only take non-negative integer values (0,1,2,3 etc.)|  Number_of_limbs_lost: _1_, _0_, _0_, _1_, _4_, ...|


In R, different types of data get treated differently by functions, and often we need to tell R explicitly what type of data each variable is.  

|  __Type__|  __Set as...__|  __Check is...__|
|--:|--:|--:|
|  __Categorical__|  `as.factor()`<br>`factor()`|  `is.factor(variable)`|
|  __Continuous__|  `as.numeric()`|  `is.numeric(variable)`|
|  __Character__|  `as.character()`|  `is.character(variable)`|



  


```{r}
distinct(some_data, species)
```






```{r}
some_data <- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-14/passwords.csv") %>% select(rank, password, category, value, strength) %>%
    rename(cracked = "value")

tibble(
    variable = names(some_data),
    description = c("popularity in their database of released passwords",
                    "password","category","Time to crack by online guessing","Strength = quality of password where 10 is highest, 1 is lowest")
) %>% knitr::kable()
```

          
`r qbegin("Task",qlabel=FALSE)`
In a new code chunk, do the following: 

1. store the following numbers as an object in R:  
  4,7,3,1,8,9,5,2,2,6,9,9,5,20  
2. Try using the function `sum()`, with the name of your object inside the brackets. 

`r qend()`
`r solbegin()`
Because this is just a set of numbers, we store it as a __vector__, using `c()`.  
We have named it `myvec`, but you can call yours whatever you like.  
  
The `sum()` function will add all of the numbers together!  
```{r}
myvec <- c(4,7,3,1,8,9,5,2,2,6,9,9,5,20)
sum(myvec)
```
`r solend()`


`r qbegin("Task",qlabel=FALSE)`
Using the square brackets - `[]` - pull out the 2nd, 4th and 6th values in the object you just created.  

__Hint:__ You will need to put inside the square brackets a _sequence of_ numbers. How do we combine numbers in to a sequence in R? using `c()`!
`r qend()`
`r solbegin()`
```{r}
myvec[c(2,4,6)]
```
`r solend()`

`r qbegin("Task",qlabel=FALSE)`
Using the square brackets, show the 167th row, with all columns.   

__Remember:__ When you are using `[]` with a dataframe, you specify `data[rows, columns]`. If you leave either rows or columns blank it will give all of them - for instance, `data[ , columns]` will give you all rows for some specified columns. 
`r qend()`
`r solbegin()`
```{r, eval=F}
mydata[167,]
```
`r solend()`

### Matrices {-}  

We will often have several vectors in which the 1st value of each vector corresponds to the same observation, for instance:  

```{r}
age<-c(1,2,3,4,5)
height<-c(20,70,80,90,95)
```

But these would be better stored as a "Matrix"
```{r}
matrix(c(1,2,3,4,5,20,70,80,90,95), nrow=5)
```





## Glossary


+ data cleaning

| Symbol |  Description| Example |
|--:|--:|--:|
|`[]`|  used to extract the 1st, 2nd, ... $i^{th}$ elements in a set of numbers | `myvector[3]` |
|`$`|  used to extract a named column from a dataframe  |  `mydata$age_variable` |

Not                       | `!`                   | !(1==1)          | FALSE
Or                        | `|`                   | (1==1) | (1==2)  | TRUE
And                       | `&`                   | (1==1) & (1==2)  | FALSE
